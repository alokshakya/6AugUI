<div class="ui-g">
    <div class="ui-g-12">
        <p-tabView (onChange)="close($event)">
            <p-tabPanel header="Chapterwise Test">
                <div class="ui-g">
                    <div class="ui-g-6">
                        <p-panel header="Result">
                            <br>
                            <span class="toright"><p-checkbox [(ngModel)]="showMark" binary="true" label="include 'Mark for Review' in result"></p-checkbox></span>
                            <p-accordion (onClose)="showChapter=false" (onOpen)="showPanel($event)">
                                <p-accordionTab *ngFor="let chapter of resultPanel();let i=index">
                                    <p-header>
                                        <div class="padtop">{{chapter.name}}</div>
                                        <div class="progress" *ngIf="!showMark">
                                            <div class="progress-bar progress-bar-success" role="progressbar" [style.width]="clubbedWidth(i)[0]">{{clubbedWidth(i)[0]|round}}
                                            </div>
                                            <div class="progress-bar progress-bar-warning" role="progressbar" [style.width]="clubbedWidth(i)[1]">{{clubbedWidth(i)[1]|round}}
                                            </div>
                                            <div class="progress-bar progress-bar-danger" role="progressbar" [style.width]="clubbedWidth(i)[2]">{{clubbedWidth(i)[2]|round}}
                                            </div>
                                        </div>
                                        <div class="progress" *ngIf="showMark">
                                            <div class="progress-bar progress-bar-success" role="progressbar" [style.width]="clubbedWidth(i,true)[0]">{{clubbedWidth(i,true)[0]|round}}
                                            </div>
                                            <div class="progress-bar progress-bar-danger" role="progressbar" [style.width]="clubbedWidth(i,true)[1]">{{clubbedWidth(i,true)[1]|round}}
                                            </div>
                                        </div>
                                    </p-header>
                                    <div class="ui-g" *ngFor="let test of chapter.tests;let j = index">
                                        <div class="ui-g-2" *ngIf="test?.result?.total_attempted_questions>0"></div>
                                        <div class="ui-g-10" *ngIf="test?.result?.total_attempted_questions>0">
                                            {{test.name}}
                                            <div *ngIf="!showMark" class="progress hover" (click)="show(i,j)">
                                                <div class="progress-bar progress-bar-success" tooltipPosition="top" pTooltip="Correct" role="progressbar" [style.width]="width(i,j)[0]">{{width(i,j)[0]|round}}
                                                </div>
                                                <div class="progress-bar progress-bar-warning" tooltipPosition="top" pTooltip="Marked" role="progressbar" [style.width]="width(i,j)[1]">{{width(i,j)[1]|round}}
                                                </div>
                                                <div class="progress-bar progress-bar-danger" tooltipPosition="top" pTooltip="Incorrect" role="progressbar" [style.width]="width(i,j)[2]">{{width(i,j)[2]|round}}
                                                </div>
                                            </div>
                                            <div *ngIf="showMark" class="progress hover" (click)="show(i,j)">
                                                <div class="progress-bar progress-bar-success" tooltipPosition="top" pTooltip="Correct" [style.width]="width(i,j,true)[0]" role="progressbar">{{width(i,j,true)[0]|round}}
                                                </div>
                                                <div class="progress-bar progress-bar-danger" tooltipPosition="top" pTooltip="Incorrect" [style.width]="width(i,j,true)[1]" role="progressbar">{{width(i,j,true)[1]|round}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </p-accordionTab>
                            </p-accordion>
                        </p-panel>
                    </div>
                    <div class="ui-g-6" *ngIf="showChapter">
                        <p-panel header="Result-Analysis >> {{currentChapter}}">
                            <div class="ui-g">
                                <div class="ui-g-12 container">
                                    <table class="table table-hover table-bordered table-responsive">
                                        <thead>
                                            <tr *ngFor="let data of chapter|keys">
                                                <th>{{data.key}}</th>
                                                <td>{{data.value}}</td>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                                <div class="ui-g-12">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Test Response</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <div class="ui-g">
                                                        <!-- <div class="ui-g-1 a" *ngFor="let resp of resultSummary?.result?.response;let i=index" [ngClass]="{'correct':resp.state=='correct', 'wrong':resp.state=='incorrect', 'un':resp.state=='unattempted', 'mark':resp.state=='marked'}">
                                                            {{i+1}}
                                                        </div> -->
                                                        <div class="ui-g-12">
                                                            <button md-mini-fab class="a" *ngFor="let resp of resultSummary?.result?.response;let i=index" [ngClass]="{'correct':resp.state=='correct', 'wrong':resp.state=='incorrect', 'un':resp.state=='unattempted', 'mark':resp.state=='marked'}"><span class="">{{i+1}}</span></button>
                                                        </div>
                                                    </div>
                                                    <div class="ui-g">
                                                        <div class="ui-g-12 nopad">Correct
                                                            <label class="chip correct"></label>
                                                        </div>
                                                        <div class="ui-g-12 nopad">Marked For Review
                                                            <label class="chip mark"></label>
                                                        </div>
                                                        <div class="ui-g-12 nopad">Wrong
                                                            <label class="chip wrong"></label>
                                                        </div>
                                                        <div class="ui-g-12 nopad">Unattempted
                                                            <label class="chip un"></label>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </p-panel>
                    </div>
                </div>
            </p-tabPanel>
        </p-tabView>
    </div>
</div>