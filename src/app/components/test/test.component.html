<p-confirmDialog responsive="true" header="Quit Test" icon="fa fa-question-circle" width="425" #cd>
    <p-footer>
        <button type="button" pButton class="ui-button-success" icon="fa-check" label="Yes" (click)="cd.accept()"></button>
        <button type="button" pButton class="ui-button-danger" icon="fa-close" label="No" (click)="cd.reject()"></button>
    </p-footer>
</p-confirmDialog>
<p-dialog header="Intsructions" [closable]="true" [(visible)]="help" [responsive]="true">
    <h2>IMPORTANT INSTRUCTIONS</h2>
    <!-- <div class="text-center">
        <button (click)="startTest()" pButton class="ui-button-success" label="start"></button>
    </div> -->
</p-dialog>
<p-growl [(value)]="errMsg"></p-growl>
<div class="ui-g">
    <div class="ui-g-12 fixed">
        <div class="ui-g head">
            <div class="ui-g-1 ui-sm-2 img"><img src="../../../assets/layout/images/Olympiadbox-logo.png" width="70px" height="65"></div>
            <div class="ui-g-2 ui-sm-9 test padtop lesswidth"><span id="test">{{chapterwiseTest.attemptDetails['name']}}</span></div>
            <div class="ui-g-1 ui-sm-4 class zeropad text-center"><span id="class">Class {{personalInfo.classInfo['abbreviation']}}</span></div>
            <div class="ui-g-1 ui-sm-4 subject zeropad"><span id="sub">{{chapterwiseTest.subject}}</span></div>
            
            <div class="ui-g-1 ui-sm-4 timer zeropad"><span id="timer"><i class="fa fa-clock-o"> </i> {{hour}}h {{min}}m {{sec}}s</span></div>
            <div class="ui-g-1 ui-sm-4 bar padtop"><span><p-progressBar [value]="counter"></p-progressBar></span></div>
            <div class="ui-g-1 ui-sm-4 count padtop"><span id="count">{{attemptedQues}}/{{totalQues}} Attempted</span></div>
            <div class="ui-g-1 ui-sm-4 person padtop"><span id="user"><i class="fa fa-user"></i> {{personalInfo.userInfo['firstname']}} {{personalInfo.userInfo['lastname']}}</span></div>
            <!--                 <div class="ui-g-1 text-center"><label class="buttonTop m" (click)="markForReview()">M</label><br>Mark For Review</div>
                <div class="ui-g-1 text-center"><label class="buttonTop v" (click)="validate()">V</label><br>Validate</div>
                <div class="ui-g-1 text-center"><label class="buttonTop n" (click)="nextQuestion()"><i class="fa fa-chevron-right"></i></label><br>Next Question</div> -->
            <!--                 <div class="ui-g-1" class="buttonTop v" (click)="validate()"> V </div>
                <div class="ui-g-1" class="buttonTop n" (click)="nextQuestion()"></div> -->
            <div class="ui-g-1 ui-sm-4 m text-center big">
                <button md-mini-fab *ngIf="!spinner2" id="m" [disabled]="spinner||spinner2||validated()||this.selectedQuestion['state']!='u'" (click)="markForReview()">M</button>

                <button md-mini-fab *ngIf="spinner2" id="m"><i class="fa fa-circle-o-notch fa-spin fa-forward"></i></button>

                <br>Mark For Review
            </div>
            <div class="ui-g-1 ui-sm-4 v text-center small">
                <button *ngIf="!spinner" md-mini-fab id="v" [disabled]="spinner||spinner2||answer==null||validated()||this.selectedQuestion['state']!='u'" (click)="validate()">V</button>
                
                <button md-mini-fab *ngIf="spinner" id="v"><i class="fa fa-circle-o-notch fa-spin fa-forward"></i></button>
                <br>Validate
            </div>
            <div class="ui-g-1 ui-sm-4 n text-center small">
                <button md-mini-fab id="n" [disabled]="spinner2||spinner" (click)="nextQuestion()"><i class="fa fa-chevron-right"></i></button>
                <br>Next Question
            </div>
        </div>
    </div>
    <div class="ui-g">
        <div class="ui-g-1 ui-sm-1 dark minwidth">
            <div class="ui-g-12"></div>
            <div class="ui-g-4 ui-sm-6 icons">&nbsp;&nbsp;<i (click)="quit()" class="fa fa-home fa-lg"></i></div>
            <div class="ui-g-4 ui-sm-6 icons"> &nbsp; <i (click)="help=true" class="fa fa-question-circle fa-lg"></i></div>
            <div class="ui-g-12"></div>
            <!-- <div class="ui-g-4" *ngFor="let number of questionsPool|keys;let n = index" (click)="displayQuestion(number.key,n+1)"><div class="qnumber" [ngClass]="{'qnumberclick':clickListener==n+1, 'qnumbermark':questionStatus[n+1]=='Marked', 'qnumbercorrect':questionStatus[n+1]=='Correct', 'qnumberwrong':questionStatus[n+1]=='Wrong'}">{{n+1}}</div></div> -->
            <div class="ui-g-4 ui-sm-6" *ngFor="let number of chapterwiseTest.qaSet;let n = index" (click)="displayQuestion(n)">
                <div class="qnumber" [ngClass]="{'qnumbermark':questionStatus[n]=='Marked'||chapterwiseTest.qaSet[n]['state']=='m', 'qnumbercorrect':questionStatus[n]=='Correct'||chapterwiseTest.qaSet[n]['state']=='c', 'qnumberwrong':questionStatus[n]=='Wrong'||chapterwiseTest.qaSet[n]['state']=='w','qnumberclick':clickListener==n}">{{n+1}}</div>
            </div>
            <div class="ui-g-12 fill"></div>
        </div>
        <div class="ui-g-10 ui-sm-10 light center">
            <div class="ui-g">
                <div class="ui-g-12 box"><span class="statement">Q{{clickListener+1}}. </span><span [MathJax]="selectedQuestion['question']" class="statement"></span>
                    <div *ngIf="selectedQuestion['image']['image_path']!=null" class="image">
                        <img src="{{imageUrl}}{{selectedQuestion['image']['image_path']}}{{selectedQuestion['image']['file_name']}}">
                    </div>
                </div>
                <!-- <div class="ui-g-2">
                        <div class="ui-g">
                            <div class="ui-g-12">
                                <button type="button" [disabled]="spinner||spinner2||validated()" pButton label="Mark for review" class="ui-button-warning" (click)="mark()"></button>
                                <button id="longbtn" class="ui-button-info" type="button" pButton label="Validate" [disabled]="spinner||spinner2||answer==null||validated()" (click)="validate()"></button>
                            </div>
                            <div class="ui-g-12">
                            </div>
                        </div>
                    </div> -->
                <div class="ui-g-12 box">
                    <div class="ui-g">
                        <div class="ui-g-6 ui-sm-12">
                            <span id="a">A</span>
                            <p-radioButton [disabled]="spinner||spinner2||validated()" name="ques" value="{{selectedQuestion['answers'][0]['id']}}" [(ngModel)]="answer"></p-radioButton><span [MathJax]="selectedQuestion['answers'][0]['answer']"></span>
                            <div class="image" *ngIf="selectedQuestion['answers']['0']['image']['image_path']!=null">
                                <img src="{{imageUrl}}{{selectedQuestion['answers'][0]['image']['image_path']}}{{selectedQuestion['answers'][0]['image']['file_name']}}">
                            </div>
                        </div>
                        <div class="ui-g-6 ui-sm-12">
                            <span id="b">B</span>
                            <p-radioButton [disabled]="spinner||spinner2||validated()" name="ques" value="{{selectedQuestion['answers'][1]['id']}}" [(ngModel)]="answer"></p-radioButton>
                            <span [MathJax]="selectedQuestion['answers'][1]['answer']"></span>
                            <div class="image" *ngIf="selectedQuestion['answers']['1']['image']['image_path']!=null">
                                <img src="{{imageUrl}}{{selectedQuestion['answers'][1]['image']['image_path']}}{{selectedQuestion['answers'][1]['image']['file_name']}}">
                            </div>
                        </div>
                        <div class="ui-g-6 ui-sm-12">
                            <span id="c">C</span>
                            <p-radioButton [disabled]="spinner||spinner2||validated()" name="ques" value="{{selectedQuestion['answers'][2]['id']}}" [(ngModel)]="answer"></p-radioButton>
                            <span [MathJax]="selectedQuestion['answers'][2]['answer']"></span>

                            <div class="image" *ngIf="selectedQuestion['answers']['2']['image']['image_path']!=null">
                                <img src="{{imageUrl}}{{selectedQuestion['answers'][2]['image']['image_path']}}{{selectedQuestion['answers'][2]['image']['file_name']}}">
                            </div>
                        </div>
                        <div class="ui-g-6 ui-sm-12">
                            <span id="d">D</span>
                            <p-radioButton [disabled]="spinner||spinner2||validated()" name="ques" value="{{selectedQuestion['answers'][3]['id']}}" [(ngModel)]="answer"></p-radioButton>
                            <span [MathJax]="selectedQuestion['answers'][3]['answer']"></span>

                            <div class="image" *ngIf="selectedQuestion['answers']['3']['image']['image_path']!=null">
                                <img src="{{imageUrl}}{{selectedQuestion['answers'][3]['image']['image_path']}}{{selectedQuestion['answers'][3]['image']['file_name']}}">
                            </div>
                        </div>
                    </div>
                    <div class="ui-g-12" *ngIf="hintDisplay">
                        <hr>
                        <div class="ui-g">
                            <div class="ui-g-6">
                                <div>
                                    <span class="incorrect" *ngIf="!correct"><i class="fa fa-times"></i> Your answer is incorrect<br><br></span>
                                    <span class="correct" *ngIf="correct"><i class="fa fa-check"></i> Your answer is correct<br><br></span>
                                    <!-- <br *ngIf="correct"> -->
                                    <!-- <br *ngIf="correct"> -->
                                    <span class="correct" *ngIf="correctOptionIndex==0">Correct Answer: <span id="a">A</span><span [MathJax]="correctAnswer['answer']"></span><br><br></span>
                                    <span class="correct" *ngIf="correctOptionIndex==1">Correct Answer: <span id="b">B</span> <span [MathJax]="correctAnswer['answer']"></span><br><br></span>
                                    <span class="correct" *ngIf="correctOptionIndex==2">Correct Answer: <span id="c">C</span> <span [MathJax]="correctAnswer['answer']"></span><br><br></span>
                                    <span class="correct" *ngIf="correctOptionIndex==3">Correct Answer: <span id="d">D</span> <span [MathJax]="correctAnswer['answer']"></span> <br><br></span>

                                </div>
                                <div class="hintimg" *ngIf="correctAnswer['image']['image_path']!=null">
                                    <img src="{{imageUrl}}{{correctAnswer['image']['image_path']}}{{correctAnswer['image']['file_name']}}">
                                </div>
                            </div>
                            <div class="ui-g-6">
                                <i class="fa fa-lightbulb-o fa-lg" style="color:#EEA236"></i> &nbsp; Hint: <span [MathJax]="selectedQuestion['hint']['name']"></span>
                                <div class="valimg" *ngIf="selectedQuestion['hint']['image']['file_name']!=null">
                                    <img src="{{imageUrl}}{{selectedQuestion['hint']['image']['image_path']}}{{selectedQuestion['hint']['image']['file_name']}}">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="ui-g-12">
                        <div class="ui-g">
                            <div class="ui-g-12" *ngIf="hintDisplay"><hr>
                                <div class="ui-g">
                                    <div class="ui-g-6">
                                        <div>
                                            <span class="incorrect" *ngIf="!correct"><i class="fa fa-times"></i> Your answer is incorrect<br><br></span>
                                            <span class="correct" *ngIf="correct"><i class="fa fa-check"></i> Your answer is correct<br><br></span>
                                            <br *ngIf="correct"><br *ngIf="correct">
                                            <span class="correct" *ngIf="!correct">Correct Answer: {{correctAnswer['answer']}} <br><br></span>
                                        </div>
                                        <img src="{{correctAnswer['image']['image_path']}}">
                                    </div>
                                    <div class="ui-g-6">
                                        <i class="fa fa-lightbulb-o fa-lg"></i> &nbsp; Hint: {{selectedQuestion['hint']['name']}}<br><br><span><br><br></span>
                                        <img src="{{selectedQuestion['hint']['image']['image_path']}}">
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>
            </div> -->
            </div>
        </div>
        <div class="ui-g-12 foot">Copyright <i class="fa fa-copyright"></i> OlympiadBox. All Rights Reserved</div>
    </div>